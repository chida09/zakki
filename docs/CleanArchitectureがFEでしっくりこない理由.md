# 「The Clean Architecture」がWebフロントエンドでしっくりこない理由の詳細な要約
- https://speakerdeck.com/twada/why-the-clean-architecture-does-not-fit-with-web-frontend
- https://www.youtube.com/watch?v=q5ZkrvP46RQ&t=3872s

## 主要なポイント：

1. **「The Clean Architecture」と「Clean Architecture」の違い**：
   - 「Clean Architecture」は設計原則を記した書籍
   - 「The Clean Architecture」は同書内の一つの実装例（例の同心円図）であり、独り歩きしている
   - "Clean"は「きれいな」という意味ではなく、Robert C. Martin氏のシリーズ名（庵野監督の「シン」に相当）

2. **ソフトウェアアーキテクチャの目的**：
   - 望まれる品質特性を促進すること
   - アーキテクチャの形状は品質特性と制約に影響される
   - 『Design It!』によれば「システムのソフトウェアアーキテクチャとは、望まれる品質特性やその他の性質を促進するためにソフトウェアをどう構成するかということに対する、重要な設計判断が集まったもの」

3. **アーキテクチャドライバー**：
   - 品質特性
   - 制約（ビジネス/技術）
   - 影響を与える機能要求
   - その他の影響を及ぼすもの

4. **Webフロントエンドとバックエンドの違い**：
   - **UI重視**：フロントエンドはユーザー体験（UX）が非常に重要
   - **環境多様性**：様々なデバイス・ブラウザで動作する必要がある
   - **状態管理の複雑さ**：ユーザー操作や非同期処理による頻繁な状態変化
   - **ビジネスロジックの複雑さ**：バックエンドに比べて比較的単純

5. **Webフロントエンドの品質特性と制約**：
   - **性能効率性**：読み込み速度、レンダリング速度、操作への応答速度
   - **使用性**：ユーザビリティ、アクセシビリティ、エラー防止性
   - **適応性**：様々なデバイス・ブラウザへの対応
   - **制約**：
     - デバイスとブラウザの多様性
     - ネットワークの不安定性
     - Core Web Vitals（LCP、FID、CLS）によるSEO影響
     - プログラミング言語の制約（JavaScript一択）

6. **なぜWebフロントエンドでは関数と値を使うのか**：
   - **変更検知の効率化**：
     - コンポーネントの再レンダリング最適化
     - 値の比較はクラスのインスタンス比較より高速・容易
   - **バンドルサイズの最適化**：
     - ESMは静的解析できるためTree-Shakingに適している
     - クラスより純粋関数とイミュータブルな値の方が不要コードの特定・削除が容易

7. **OOPからFPへのスタイル変更**：
   - OOPの価値観とフロントエンドの制約が衝突
   - 遅延結合より静的解析性を重視
   - 継承可能性より解析しやすさを重視
   - 状態のカプセル化よりイミュータブルな値を重視
   - Rustが安全性とパフォーマンスの両立のためにスタイル変更を促したように、Webフロントエンドのエコシステムは保守性とパフォーマンスの両立のためにFPスタイルを促進

8. **モヤモヤの原因**：
   - 「The Clean Architecture」はもともとJavaなどでの複雑なバックエンド向け実装例
   - これをそのままWebフロントエンドに持ち込むと、品質特性や制約の不一致による違和感が生じる
   - クラスベースOOPとJavaScriptフレームワークの相性が悪い

## 結論：
「The Clean Architecture」がWebフロントエンドでしっくりこないのは、促進すべき品質特性と制約が異なるためです。Webフロントエンドでは、保守性とパフォーマンスの両立のために、クラスベースOOPよりも関数型プログラミングスタイルが適していることが多く、それがモダンなWebフレームワークの設計思想に反映されています。アーキテクチャはその形状ではなく、根底にある原則と目的を理解して、対象領域の特性に合わせて適応させることが重要です。
